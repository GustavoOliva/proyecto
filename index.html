<HTML>
<HEAD>
<TITLE>Cotizacion </TITLE>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" media="screen">
<script src="jspdf/dist/jspdf.min.js"></script>
<SCRIPT LANGUAGE="JavaScript">


function isValidDate(day,month,year)

{

    var dteDate;

 

    
    month=month-1;

        dteDate=new Date(year,month,day);

 

  

    return ((day==dteDate.getDate()) && (month==dteDate.getMonth()) && (year==dteDate.getFullYear()));

}



function validate_fecha(fecha)

{

    var patron=new RegExp("^(19|20)+([0-9]{2})([-])([0-9]{1,2})([-])([0-9]{1,2})$");

 

    if(fecha.search(patron)==0)

    {

        var values=fecha.split("-");

        if(isValidDate(values[2],values[1],values[0]))

        {

            return true;

        }

    }

    return false;

}

 

function calcularEdad(form)

{
     		var nombre, diaNacimiento, mesNacimiento, anioNacimiento, conyuge, hijos, cantidadHijos, edadConyuge;
     		nombre = form.nombreCompleto.value;
             diaNacimiento = form.diaNacimiento.value;
             mesNacimiento = form.mesNacimiento.value;
             anioNacimiento = form.anioNacimiento.value;
             
            
             var fecha = anioNacimiento + '-' + mesNacimiento + '-' +diaNacimiento;

        

 



    if(validate_fecha(fecha)==true)
 {
        var values=fecha.split("-");

        var dia = values[2];

        var mes = values[1];

        var ano = values[0];


        var fecha_hoy = new Date();

        var ahora_ano = fecha_hoy.getYear();

        var ahora_mes = fecha_hoy.getMonth();

        var ahora_dia = fecha_hoy.getDate();



        var edad = (ahora_ano + 1900) - ano;

        if ( ahora_mes < (mes - 1))

        {

            edad--;

        }

        if (((mes - 1) == ahora_mes) && (ahora_dia < dia))

        {

            edad--;

        }

        if (edad > 1900)

        {

            edad -= 1900;

        }

 

        conyuge = form.conyuge.value;
		edadConyuge = form.edadConyuge.value;
		hijos = form.hijos.value;
		cantidadHijos = form.cantidadHijos.value;
		
		var recHijos;
		var recargoHijos;
        const precioBase = 250;


		var comision = precioBase * 0.30;
		var	recargos = 0;
		var totalPagar;
		var recargoConyuge;
		
		
			if(hijos == 'SI'){
				recHijos   = 0.01*250;
				recargoHijos = cantidadHijos * recHijos;


			}else{
				recargoHijos = 0;
			}







		

			if(conyuge == 'SI' ){

						if(edadConyuge <30){
						recargoConyuge = 250*0.01;
						
						}else if(edadConyuge >=30 && edadConyuge <40){
							
							recargoConyuge = 250 * 0.02;
						}
						else if(edadConyuge >= 40 && edadConyuge <50){
							
							recargoConyuge = 250 * 0.03;
						}
						else if(edadConyuge >= 50 && edadConyuge <70 ){
							
							recargoConyuge = 250*0.05;
						}else{
				
					recargoConyuge = 0;
				}

				
			}   else{
				
				recargoConyuge = 0;
			}    	










        	if(edad >= 18 && edad <=65){


        		


        		if (edad >=18 && edad <21){
        				totalPagar = precioBase + comision + recargos + recargoConyuge + recargoHijos;
        				/*alert("Felicitaciones " +nombre + " ya esta asegurado, detalle de su factura: Precio Base: "+precioBase+" Comision: "+ comision+ " Recargos por Conyuge: "+ recargoConyuge+" Recargos por hijos: "+recargoHijos+ " Total: " + totalPagar);
*/


        				 var test =  "Seguros TK-U"+"\r\n"
        				+ "Felicitaciones " +nombre + " ya esta asegurado. Detalle de factura: "+"\r\n"+ "Precio Base: "+precioBase+ "\r\n"+"Recargo por edad: "+recargos +"\r\n"+"Comision: "+ comision+ "\r\n"+ "Recargos por Conyuge: "+ recargoConyuge+ "\r\n" +"Recargos por hijos: "+recargoHijos+"\r\n" +"Total: " + totalPagar;
        				var doc = new jsPDF();
    					doc.text(20,20, test);
    					doc.save('segurosTKU.pdf');



        				  
        		}else if(edad >=21 && edad <25){
        				recargos = 250 * 0.01;
        				totalPagar = precioBase + comision + recargos + recargoConyuge + recargoHijos;
        				
        				 /*alert("Felicitaciones " +nombre + " ya esta asegurado, detalle de su factura: Precio Base: "+precioBase+ " Recargo por edad: "+recargos +" Comision: "+ comision+ " Recargos por Conyuge: "+ recargoConyuge+ " Recargos por hijos: "+recargoHijos+ " Total: " + totalPagar);
*/

        			 var test =  "Seguros TK-U"+"\r\n"
        				+ "Felicitaciones " +nombre + " ya esta asegurado. Detalle de factura: "+"\r\n"+ "Precio Base: "+precioBase+ "\r\n"+"Recargo por edad: "+recargos +"\r\n"+"Comision: "+ comision+ "\r\n"+ "Recargos por Conyuge: "+ recargoConyuge+ "\r\n" +"Recargos por hijos: "+recargoHijos+"\r\n" +"Total: " + totalPagar;
        				var doc = new jsPDF();
    					doc.text(20,20, test);
    					doc.save('segurosTKU.pdf');


        				


        		}else if(edad >=25 && edad <30){		
        				recargos = 250 * 0.02;
        				totalPagar = precioBase + comision + recargos + recargoConyuge+ recargoHijos;
        				 /*alert("Felicitaciones " +nombre + " ya esta asegurado, detalle de su factura: Precio Base: "+precioBase+ " Recargo por edad: "+recargos +" Comision: "+ comision+ " Recargos por Conyuge: "+ recargoConyuge+  " Recargos por hijos: "+recargoHijos+" Total: " + totalPagar);*/


        				 var test =  "Seguros TK-U"+"\r\n"
        				+ "Felicitaciones " +nombre + " ya esta asegurado. Detalle de factura: "+"\r\n"+ "Precio Base: "+precioBase+ "\r\n"+"Recargo por edad: "+recargos +"\r\n"+"Comision: "+ comision+ "\r\n"+ "Recargos por Conyuge: "+ recargoConyuge+ "\r\n" +"Recargos por hijos: "+recargoHijos+"\r\n" +"Total: " + totalPagar;
        				var doc = new jsPDF();
    					doc.text(20,20, test);
    					doc.save('segurosTKU.pdf');
        				

        		}else if(edad >=30 && edad <40){
        				
        				recargos = 250 * 0.05;
        				totalPagar = precioBase + comision + recargos + recargoConyuge + recargoHijos;
        				/* alert("Felicitaciones " +nombre + " ya esta asegurado, detalle de su factura: Precio Base: "+precioBase+ "Recargo por edad: "+recargos +"Comision: "+ comision+ "Recargos por Conyuge: "+ recargoConyuge+"\r\n" + "Recargos por hijos: "+recargoHijos+"\r\n" +"Total: " + totalPagar);*/

        				 var test =  "Seguros TK-U"+"\r\n"
        				+ "Felicitaciones " +nombre + " ya esta asegurado. Detalle de factura: "+"\r\n"+ "Precio Base: "+precioBase+ "\r\n"+"Recargo por edad: "+recargos +"\r\n"+"Comision: "+ comision+ "\r\n"+ "Recargos por Conyuge: "+ recargoConyuge+ "\r\n" +"Recargos por hijos: "+recargoHijos+"\r\n" +"Total: " + totalPagar;
        				var doc = new jsPDF();
    					doc.text(20,20, test);
    					doc.save('segurosTKU.pdf');
        				

        		}else if(edad >=40 && edad <50){
        				recargos = 250 * 0.08;
        				totalPagar = precioBase + comision + recargos + recargoConyuge+ recargoHijos;
        				 /*alert("Felicitaciones " +nombre + " ya esta asegurado, detalle de su factura: Precio Base: "+precioBase+ " Recargo por edad: "+recargos +" Comision: "+ comision+ " Recargos por Conyuge: "+ recargoConyuge+  " Recargos por hijos: "+recargoHijos+" Total: " + totalPagar);*/
        				  var test =  "Seguros TK-U"+"\r\n"
        				+ "Felicitaciones " +nombre + " ya esta asegurado. Detalle de factura: "+"\r\n"+ "Precio Base: "+precioBase+ "\r\n"+"Recargo por edad: "+recargos +"\r\n"+"Comision: "+ comision+ "\r\n"+ "Recargos por Conyuge: "+ recargoConyuge+ "\r\n" +"Recargos por hijos: "+recargoHijos+"\r\n" +"Total: " + totalPagar;
        				var doc = new jsPDF();
    					doc.text(20,20, test);
    					doc.save('segurosTKU.pdf');
        				

        		}else if(edad >=50 && edad <65){
        				recargos = 250 * 0.12;
        				totalPagar = precioBase + comision + recargos + recargoConyuge + recargoHijos;
        				/* alert("Felicitaciones " +nombre + " ya esta asegurado, detalle de su factura: Precio Base: "+precioBase+ " Recargo por edad: "+recargos +" Comision: "+ comision+ " Recargos por Conyuge: "+ recargoConyuge+  " Recargos por hijos: "+recargoHijos+" Total: " + totalPagar);*/
        				 var test =  "Seguros TK-U"+"\r\n"
        				+ "Felicitaciones " +nombre + " ya esta asegurado. Detalle de factura: "+"\r\n"+ "Precio Base: "+precioBase+ "\r\n"+"Recargo por edad: "+recargos +"\r\n"+"Comision: "+ comision+ "\r\n"+ "Recargos por Conyuge: "+ recargoConyuge+ "\r\n" +"Recargos por hijos: "+recargoHijos+"\r\n" +"Total: " + totalPagar;
        				var doc = new jsPDF();
    					doc.text(20,20, test);
    					doc.save('segurosTKU.pdf');
        			

        		}else{
        			alert("SI SE PUDO ");
        		}
        	


        	}else{
        		alert("No se le puede asegurar");
        	}







    }else{

        
        	alert("Fecha ingresada de manera incorrecta");
    }
   
}
		

 

</script>









</HEAD>
<BODY>

	
	
<center>
	<h3>Ingrese la informacion solicitada</h3>
<FORM NAME="myform" ACTION="" METHOD="GET">



		
		<input type="text" class = "form-control" name="nombreCompleto" placeholder="Nombre completo">
        <br>
        <input type="number" class = "form-control" name="diaNacimiento" placeholder="Dia de Nacimiento ">
        <br>
        <input type="number" class = "form-control" name="mesNacimiento" placeholder="Mes de Nacimiento">
        <br>
        <input type="number" class = "form-control" name="anioNacimiento" placeholder="Anio de Nacimiento">
        <br>
        <input type="text" class = "form-control" name="conyuge" placeholder="Conyuge (SI/NO)">
        <br>
        <input type="number" class = "form-control" name="edadConyuge" placeholder="Edad conyuge">
        <br>
        <input type="text" class = "form-control" name="hijos" placeholder="Hijos (SI/NO)">
        <br>
        <input type="number"  class = "form-control" name="cantidadHijos" placeholder="Cantidad de hijos menores de 21 anios:">
        <br> 
		<INPUT TYPE="button" class="btn-success" NAME="button1" Value="Cotizar" onClick="calcularEdad(this.form)">
		
		
		
</FORM>

</center>
</BODY>
</HTML>

